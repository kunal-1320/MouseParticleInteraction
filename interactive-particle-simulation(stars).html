<!DOCTYPE html>
<html>
<head>
  <title>Interactive Particle Simulation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      overflow: hidden;
    }

    #particle-canvas {
      position: absolute;
      width: 100%;
      height: 100%;
    }

    #settings-bar {
      position: absolute;
      left: 20px;
      top: 60px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 20px;
      border-radius: 5px;
      z-index: 1;
      display: none;
    }

    #settings-button {
      position: absolute;
      left: 20px;
      top: 20px;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1;
    }

    #close-button {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }

    .setting {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .setting label {
      margin-right: 10px;
    }

    .setting input {
      width: 100px;
    }
  </style>
</head>
<body>
  <canvas id="particle-canvas"></canvas>

  <div id="settings-button">
    Settings
  </div>

  <div id="settings-bar">
    <div id="close-button">
      <i class="fas fa-times"></i>
    </div>
    <div class="setting">
      <label for="particleCount">Particle Count:</label>
      <input type="range" id="particleCount" min="100" max="500" value="300" step="10">
    </div>
    <div class="setting">
      <label for="particleSize">Particle Size:</label>
      <input type="range" id="particleSize" min="5" max="20" value="12" step="1">
    </div>
    <div class="setting">
      <label for="particleSpeed">Particle Speed:</label>
      <input type="range" id="particleSpeed" min="0.5" max="3" value="1.5" step="0.1">
    </div>
    <div class="setting">
      <label for="repulsionRadius">Repulsion Radius:</label>
      <input type="range" id="repulsionRadius" min="50" max="300" value="150" step="10">
    </div>
    <div class="setting">
      <label for="repulsionForce">Repulsion Force:</label>
      <input type="range" id="repulsionForce" min="0.1" max="1" value="0.6" step="0.1">
    </div>
    <div class="setting">
      <label for="returnForce">Return Force:</label>
      <input type="range" id="returnForce" min="0.01" max="0.1" value="0.02" step="0.01">
    </div>
  </div>

  <script>
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let particleCount = 300;
    let particleSize = 12;
    let particleSpeed = 1.5;
    let repulsionRadius = 150;
    let repulsionForce = 0.6;
    let returnForce = 0.02;

    const particleCountInput = document.getElementById('particleCount');
    const particleSizeInput = document.getElementById('particleSize');
    const particleSpeedInput = document.getElementById('particleSpeed');
    const repulsionRadiusInput = document.getElementById('repulsionRadius');
    const repulsionForceInput = document.getElementById('repulsionForce');
    const returnForceInput = document.getElementById('returnForce');

    particleCountInput.addEventListener('input', () => {
      particleCount = parseInt(particleCountInput.value);
      initParticles();
    });

    particleSizeInput.addEventListener('input', () => {
      particleSize = parseInt(particleSizeInput.value);
    });

    particleSpeedInput.addEventListener('input', () => {
      particleSpeed = parseFloat(particleSpeedInput.value);
    });

    repulsionRadiusInput.addEventListener('input', () => {
      repulsionRadius = parseInt(repulsionRadiusInput.value);
    });

    repulsionForceInput.addEventListener('input', () => {
      repulsionForce = parseFloat(repulsionForceInput.value);
    });

    returnForceInput.addEventListener('input', () => {
      returnForce = parseFloat(returnForceInput.value);
    });

    const particles = [];

    function initParticles() {
      particles.length = 0;
      for (let i = 0; i < particleCount; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height;
        particles.push({
          x,
          y,
          vx: 0,
          vy: 0,
          initialX: x,
          initialY: y,
          color: `hsl(${Math.random() * 360}, 100%, 50%)`,
          subColor: `hsl(${Math.random() * 360}, 100%, 70%)`
        });
      }
    }

    initParticles();

    let interactionX = 0;
    let interactionY = 0;
    let isInteracting = false;

    function drawStar(x, y, size, color, subColor) {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(Math.PI);
      ctx.beginPath();
      for (let i = 0; i < 5; i++) {
        ctx.lineTo(Math.cos((i * 4 * Math.PI) / 5) * size,
                   Math.sin((i * 4 * Math.PI) / 5) * size);
      }
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();

      ctx.beginPath();
      for (let i = 0; i < 5; i++) {
        ctx.lineTo(Math.cos((i * 4 * Math.PI) / 5) * size * 0.6,
                   Math.sin((i * 4 * Math.PI) / 5) * size * 0.6);
      }
      ctx.closePath();
      ctx.fillStyle = subColor;
      ctx.fill();

      ctx.restore();
    }

    function updateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let i = 0; i < particles.length; i++) {
        const particle = particles[i];

        if (isInteracting) {
          const dx = interactionX - particle.x;
          const dy = interactionY - particle.y;
          const distance = Math.hypot(dx, dy);
          if (distance < repulsionRadius) {
            const force = (repulsionRadius - distance) / repulsionRadius * repulsionForce;
            particle.vx -= dx * force;
            particle.vy -= dy * force;
          }
        }

        if (particle.x !== particle.initialX || particle.y !== particle.initialY) {
          const dx = particle.initialX - particle.x;
          const dy = particle.initialY - particle.y;
          particle.vx += dx * returnForce;
          particle.vy += dy * returnForce;
        }

        particle.x += particle.vx;
        particle.y += particle.vy;

        particle.vx *= 0.95;
        particle.vy *= 0.95;

        particle.x = Math.max(0, Math.min(canvas.width, particle.x));
        particle.y = Math.max(0, Math.min(canvas.height, particle.y));

        drawStar(particle.x, particle.y, particleSize, particle.color, particle.subColor);
      }

      requestAnimationFrame(updateParticles);
    }

    function startInteraction(x, y) {
      interactionX = x;
      interactionY = y;
      isInteracting = true;
    }

    function moveInteraction(x, y) {
      if (isInteracting) {
        interactionX = x;
        interactionY = y;
      }
    }

    function endInteraction() {
      isInteracting = false;
    }

    if (isMobile) {
      // Touch events for mobile
      canvas.addEventListener('touchstart', (event) => {
        event.preventDefault();
        const touch = event.touches[0];
        startInteraction(touch.clientX, touch.clientY);
      });

      canvas.addEventListener('touchmove', (event) => {
        event.preventDefault();
        const touch = event.touches[0];
        moveInteraction(touch.clientX, touch.clientY);
      });

      canvas.addEventListener('touchend', endInteraction);
      canvas.addEventListener('touchcancel', endInteraction);

      // Set touch-action to none for mobile
      canvas.style.touchAction = 'none';
    } else {
      // Mouse events for desktop
      canvas.addEventListener('mousemove', (event) => {
        moveInteraction(event.clientX, event.clientY);
        isInteracting = true;
      });

      canvas.addEventListener('mouseleave', () => {
        isInteracting = false;
      });
    }

    const settingsButton = document.getElementById('settings-button');
    const settingsBar = document.getElementById('settings-bar');
    const closeButton = document.getElementById('close-button');

    settingsButton.addEventListener('click', () => {
      settingsBar.style.display = settingsBar.style.display === 'none' ? 'block' : 'none';
    });

    closeButton.addEventListener('click', () => {
      settingsBar.style.display = 'none';
    });

    window.addEventListener('resize', () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      initParticles();
    });

    updateParticles();
  </script>

  <script src="https://kit.fontawesome.com/your-font-awesome-kit.js" crossorigin="anonymous"></script>
</body>
</html>
